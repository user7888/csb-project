<!DOCTYPE html>
<html>
<head>
    <title>Blog posts</title>
</head>
<body>
    <h1>Blog posts</h1>
    <h3>Click the question to see the details and vote</h3>
    <ul>
        {% for post in blog_posts %}
            <li>
                <a href="{% url 'blogs:detail' post.id %}">
                    {{ post.title }} - {{ post.pub_date }}
                </a>
                {% if post.author == current_user %}
                <form method="get" action="{% url 'blogs:delete' post.id %}" style="display:inline;">
                    <button type="submit">Delete</button>
                    <!-- Used for passing data in a GET request,
                         as doing it in the URL doesn't work -->
                    <input type="hidden" name="sessionid" value="{{ sessionid }}">
                </form>
                <!-- Broken authentication fix
                <form method="post" action="{% url 'blogs:delete' post.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit">Delete</button>
                </form>
                -->
                {% endif %}
            </li>
        {% empty %}
            <li>No blog posts available.</li>
        {% endfor %}
    </ul>
    <a href="{% url 'blogs:index' %}?sessionid={{ sessionid }}">Back to Home</a>
</body>
</html>